# Counting Helper — 功能统计与技术栈总结

## 一、已实现功能统计

### 1. 用户与认证

| 功能 | 说明 | 后端 | 前端 |
|------|------|------|------|
| 用户注册 | 用户名、密码、可选邮箱，密码 BCrypt 加密 | ✅ | ✅ |
| 用户登录 | 登录后返回 JWT（当前鉴权已暂时关闭） | ✅ | ✅ |
| 获取当前用户 | GET /api/auth/me，含角色信息 | ✅ | ✅ |
| 角色与权限 | 普通用户 / 管理员，前端按角色展示菜单 | ✅ | ✅ |

### 2. 交易与记账

| 功能 | 说明 | 后端 | 前端 |
|------|------|------|------|
| 添加交易 | 收入/支出、金额、币种、支付方式、分类、描述、日期 | ✅ | ✅ |
| 交易列表 | 按日期筛选、分页展示 | ✅ | ✅ |
| 编辑交易 | 修改已有交易 | ✅ | ✅ |
| 删除交易 | 按 ID 删除 | ✅ | ✅ |
| 交易统计汇总 | 总收入、总支出、余额（GET /api/transactions/stats/summary） | ✅ | ✅ |

### 3. 多币种与汇率

| 功能 | 说明 | 后端 | 前端 |
|------|------|------|------|
| 货币转换 | 支持 GBP、CNY、USD、EUR 等（POST /api/currency/convert） | ✅ | ✅ |
| 多币种展示 | 前端选择币种并展示 | — | ✅ |

### 4. 数据展示与图表

| 功能 | 说明 | 后端 | 前端 |
|------|------|------|------|
| 概览仪表盘 | 统计卡片、收支趋势图（Recharts） | ✅ | ✅ |
| 图表数据 | 基于交易数据生成图表 | ✅ | ✅ |

### 5. AI 分析

| 功能 | 说明 | 后端 | 前端 |
|------|------|------|------|
| 消费分析 | 按周期（日/3 天/周/月/全部）请求分析 | ✅ | ✅ |
| OpenAI 集成 | 配置 OPENAI_API_KEY 时使用 GPT 生成建议 | ✅ | — |
| 无 Key 兜底 | 未配置 Key 时返回基础文本分析 | ✅ | — |

### 6. 管理端（管理员）

| 功能 | 说明 | 后端 | 前端 |
|------|------|------|------|
| 用户列表 | GET /api/admin/users | ✅ | ✅ |
| 管理端统计 | GET /api/admin/stats | ✅ | ✅ |
| 删除用户 | DELETE /api/admin/users/:id | ✅ | ✅ |
| 性能监控页 | 展示服务端性能指标（uptime、QPS 等） | ❌ 未实现 | ✅ 页面存在 |

### 7. 系统与运维

| 功能 | 说明 | 后端 | 前端 |
|------|------|------|------|
| 健康检查 | GET /api/health | ✅ | — |
| 全局异常处理 | 统一 JSON 错误格式 | ✅ | — |
| 参数校验 | Bean Validation（如登录/注册/交易 DTO） | ✅ | — |

### 8. 前端增强（含移动端 / 上架准备）

| 功能 | 说明 |
|------|------|
| 单页应用（SPA） | React Router，后端 SPA 回退（SpaFallbackFilter） |
| **移动端导航** | 小屏下顶部汉堡菜单 + 下拉菜单（概览/交易/添加/AI分析/关于/退出），桌面端保持横栏 |
| **触控与安全区** | 按钮/输入框/导航最小触控约 44px；`safe-area-inset` 适配刘海与底部横条；`viewport-fit=cover` |
| 离线提示 | 检测 `navigator.onLine`，离线时顶部黄色条 |
| 接口错误提示 | 请求无响应（网络错误）时顶部红色条，可关闭 |
| 关于页 | 版本号、应用 ID、可选隐私政策链接（VITE_PRIVACY_URL） |
| 启动图（Splash） | Capacitor SplashScreen，蓝色背景，应用就绪后隐藏 |
| Android 打包 | Capacitor Android 工程，versionName 1.0.0，可打 AAB/APK |
| 商店文案与说明 | docs/GOOGLE_PLAY_LISTING.md（应用名、短描述、长描述、隐私政策等） |

---

## 二、技术栈总结

### 后端（backend-java）

| 类别 | 技术 | 版本/说明 |
|------|------|-----------|
| 语言与运行时 | Java | 17 |
| 框架 | Spring Boot | 3.2.0 |
| Web | spring-boot-starter-web | REST API |
| 安全 | Spring Security | 当前鉴权关闭，支持 JWT 扩展 |
| 数据访问 | Spring Data JPA + Hibernate | 社区版 SQLite 方言 |
| 数据库 | SQLite | 单文件，JDBC（xerial 3.44.1.0） |
| 认证 | JWT（jjwt 0.12.3）+ BCrypt | 密码加密、Token 生成与校验（逻辑在，未挂到过滤链） |
| 校验 | Bean Validation | 请求体校验 |
| AI | OpenAI GPT（theokanning openai-gpt3-java） | 0.18.2，可选配置 |
| 构建 | Maven | 打包为 JAR（如 counting-helper-backend-1.0.0.jar） |

### 前端（frontend）

| 类别 | 技术 | 版本/说明 |
|------|------|-----------|
| 语言 | TypeScript | 5.x |
| UI 框架 | React | 18.x |
| 路由 | React Router | 6.x |
| 构建与开发 | Vite | 5.x |
| 样式 | Tailwind CSS | 3.x |
| 图表 | Recharts | 2.x |
| HTTP | Axios | 1.x，封装 api 与拦截器 |
| 移动端/打包 | Capacitor | 6.x（Core、CLI、Android、SplashScreen） |

### 部署与运行

| 项目 | 说明 |
|------|------|
| 后端端口 | 8000 |
| API 前缀 | /api（无 context-path，控制器统一带 /api） |
| 前端开发 | Vite dev 默认 3000，代理 /api → 8000 |
| 生产前端 | 可打包进后端 static，或单独部署；App 通过 VITE_API_URL 指向线上 API |
| 数据库路径 | 默认 `${user.dir}/../database/accounting.db`（可配置） |

### 应用商店相关

| 项目 | 说明 |
|------|------|
| 应用 ID | com.countinghelper.app |
| 应用名 | Counting Helper |
| 目标 | Google Play（Android 已配置）；iOS 可选（需 Mac + Xcode） |
| 文档 | docs/APP_STORE_ASSESSMENT.md、docs/GOOGLE_PLAY_LISTING.md、frontend/README_APP_BUILD.md |

---

## 三、简要汇总

- **功能**：注册/登录、交易 CRUD、多币种与汇率、统计与图表、AI 分析（含 OpenAI 与兜底）、管理端用户与统计、健康检查；前端含离线/网络错误提示、关于页、Splash、Android 打包与商店文案。
- **技术栈**：后端 Spring Boot 3 + JPA + SQLite + JWT/BCrypt + 可选 OpenAI；前端 React 18 + TypeScript + Vite + Tailwind + Recharts + Capacitor（Android）。
- **未实现**：后端 `/api/performance`（性能监控接口）；当前未启用 JWT 鉴权（可按需恢复）。
